shoppingActionsJS={langId:"-1",storeId:"",catalogId:"",userType:"",baseItemAddedToCart:!1,entitledItems:[],entitledItemJsonObject:null,selectedAttributesList:new Object,moreInfoUrl:"",isPopup:!1,displayPriceRange:!0,itemPriceJsonOject:[],allSwatchesArrayList:new Object,skuImageId:"",cookieKeyPrefix:"CompareItems_",cookieDelimiter:";",maxNumberProductsAllowedToCompare:4,minNumberProductsAllowedToCompare:2,baseCatalogEntryId:0,selectedProducts:new Object,productList:new Object,currencySymbol:"",compareReturnName:"",searchTerm:"",search01:"'",search02:'"',replaceStr01:/\\\'/g,replaceStr02:/\\\"/g,ampersandChar:/&/g,ampersandEntityName:"&amp;",productAddedList:new Object,allPhysicalStores:new Object,isGun:"false",orderHasGun:!1,subscriptionFrequency:"",setCompareReturnName:function(e){this.compareReturnName=e},setSearchTerm:function(e){this.searchTerm=e},setCommonParameters:function(e,t,i,r,o){this.langId=e,this.storeId=t,this.catalogId=i,this.userType=r,this.currencySymbol=o},setEntitledItems:function(e){this.entitledItems=e},disableElement:function(e){dojo.setAttr(dojo.byId(e),"disabled","disabled")},enableElement:function(e){dojo.removeAttr(dojo.byId(e),"disabled")},getCatalogEntryId:function(e){var t=[],i="";for(attribute in i="undefined"!=typeof productDisplayJS?productDisplayJS.selectedAttributesList[e]:this.selectedAttributesList[e])t.push(attribute+"_|_"+i[attribute]);return this.resolveSKU(t)},getCatalogEntryIdforProduct:function(e){var t=[];for(attribute in e)t.push(attribute+"_|_"+e[attribute]);return this.resolveSKU(t)},getEntitledItemJsonObject:function(){return this.entitledItemJsonObject},resolveSKU:function(e){console.debug("Resolving SKU >> "+e+">>"+this.entitledItems);var t="",i=e.length;if(1==this.entitledItems.length)return this.entitledItems[0].catentry_id;for(x in this.entitledItems){t=this.entitledItems[x].catentry_id;var r=this.entitledItems[x].Attributes,o=0;for(index in r)o++;if(0==i&&0==o)return t;if(0!=o&&i>=o){var d=0;for(attributeName in e){var a=e[attributeName],n=a.replace(this.search02,this.search01);(a in r||n in r)&&d++}if(o==d)return console.debug("CatEntryId:"+t+" for Attribute: "+e),this.disableBuyButtonforUnbuyable(x),t}}return null},setSelectedAttribute:function(e,t,i,r,o){console.debug(e+" : "+t);var d=this.selectedAttributesList[i];null==d&&(d=new Object),t=(t=(t=t.replace(this.replaceStr01,this.search01)).replace(this.replaceStr02,this.search02)).replace(this.ampersandChar,this.ampersandEntityName),d[e]=t,this.moreInfoUrl=this.moreInfoUrl+"&"+e+"="+t,this.selectedAttributesList[i]=d,this.changeProdImage(i,e,t,r,o)},setSelectedAttributeOfProduct:function(productId,selectedAttributeName,selectedAttributeValue,isSingleSKU){var selectedAttributesForProduct=null;selectedAttributesForProduct=this.selectedProducts[productId]?this.selectedProducts[productId]:new Object,null!=selectedAttributeName&&""!=selectedAttributeName&&(selectedAttributesForProduct[selectedAttributeName]=selectedAttributeValue),this.selectedProducts[productId]=selectedAttributesForProduct;var entitledItemJSON=eval("("+dojo.byId("entitledItem_"+productId).innerHTML+")");this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryIdforProduct(selectedAttributesForProduct);if(null==catalogEntryId)catalogEntryId=0;else if(this.changePrice("entitledItem_"+productId,!1,!0,productId),"undefined"!=typeof MerchandisingAssociationJS&&null!=MerchandisingAssociationJS.baseItemParams&&"BundleBean"==MerchandisingAssociationJS.baseItemParams.type)for(idx=0;idx<MerchandisingAssociationJS.baseItemParams.components.length;idx++)productId==MerchandisingAssociationJS.baseItemParams.components[idx].productId&&(MerchandisingAssociationJS.baseItemParams.components[idx].id=catalogEntryId);var productDetails=null;this.productList[productId]?productDetails=this.productList[productId]:(productDetails=new Object,this.productList[productId]=productDetails,productDetails.baseItemId=productId),productDetails.id=catalogEntryId,productDetails.quantity&&dojo.topic.publish("Quantity_Changed",dojo.toJson(productDetails)),isSingleSKU||(0!=catalogEntryId?dojo.topic.publish("DefiningAttributes_Resolved_"+productId,catalogEntryId,productId):dojo.topic.publish("DefiningAttributes_Changed_"+productId,catalogEntryId,productId))},quantityLimitReached:function(e,t){dojo.byId("quantity_"+e)&&(dojo.byId("quantity_"+e).value=t,dojo.byId(e+"_quantity_msg")?dojo.place("<div id='"+e+"_quantity_msg' class='only_qty_available'>Only "+t+" available</div>",e+"_quantity_msg","replace"):dojo.place("<div id='"+e+"_quantity_msg' class='only_qty_available'>Only "+t+" available</div>","add2CartBtn","before"),dojo.byId(e+"_increment")&&0==dojo.byId(e+"_increment").disabled&&(dojo.byId(e+"_increment").disabled=!0))},isValidClubExclusive:function(e,t,i,r){var o="isClubExclusive_"+this.getClubExclusiveCatentryId(e);if(dojo.byId(o)&&"true"==dojo.byId(o).value){if("undefined"!=typeof isGuest&&null!=isGuest&&0==isGuest&&dojo.byId("savedCards")&&"true"==dojo.byId("savedCards").value)return!0;if("undefined"!=typeof isGuest&&null!=isGuest&&0==isGuest&&dojo.byId("savedCards")&&"false"==dojo.byId("savedCards").value)return getClubWalletItems();if("undefined"!=typeof isGuest&&null!=isGuest&&1==isGuest)return clubExclusiveGuestOverlay(),!1}},getClubExclusiveCatentryId:function(entitledItemId){null!=dojo.byId(entitledItemId)?entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")"):entitledItemJSON=this.getEntitledItemJsonObject(),this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId(entitledItemId);return catalogEntryId},Add2ShopCartAjax:function(entitledItemId,quantity,isPopup,customParams){if(browseOnly)MessageHelper.displayErrorMessage(storeNLS.ERROR_ADD2CART_BROWSE_ONLY);else{var isClubExclusive="false",clubCatalogEntryId=this.getClubExclusiveCatentryId(entitledItemId),id="isClubExclusive_"+clubCatalogEntryId;if(dojo.byId(id)&&"true"==dojo.byId(id).value&&(isClubExclusive=!0),this.isValidClubExclusive(entitledItemId,quantity,isPopup,customParams)||"false"==isClubExclusive){var entitledItemJSON,perAttrElement=dojo.query("#personaliationList > li input");if(reWhiteSpace=new RegExp(/^\s+$/),null!=perAttrElement){for(var i=0;i<perAttrElement.length;i++)"To Email"!=perAttrElement[i].alt&&"From Email"!=perAttrElement[i].alt&&"To"!=perAttrElement[i].alt&&"From"!=perAttrElement[i].alt||dojo.removeClass(perAttrElement[i].id,"input-error");for(var i=0;i<perAttrElement.length;i++){if(null!=perAttrElement[i]&&reWhiteSpace.test(perAttrElement[i].value)||""==perAttrElement[i].value){if("To Email"==perAttrElement[i].alt)return MessageHelper.formErrorHandleClient(perAttrElement[i].id,MessageHelper.messages.ERROR_GIFT_CARD_TOEmailNameEmpty,"below"),void dojo.addClass(perAttrElement[i].id,"input-error");if("From Email"==perAttrElement[i].alt)return MessageHelper.formErrorHandleClient(perAttrElement[i].id,MessageHelper.messages.ERROR_GIFT_CARD_FROMEmailNameEmpty,"below"),void dojo.addClass(perAttrElement[i].id,"input-error");if("To"==perAttrElement[i].alt)return MessageHelper.formErrorHandleClient(perAttrElement[i].id,MessageHelper.messages.ERROR_GIFT_CARD_TONameEmpty,"below"),void dojo.addClass(perAttrElement[i].id,"input-error");if("From"==perAttrElement[i].alt)return MessageHelper.formErrorHandleClient(perAttrElement[i].id,MessageHelper.messages.ERROR_GIFT_CARD_FROMNameEmpty,"below"),void dojo.addClass(perAttrElement[i].id,"input-error")}if("To Email"==perAttrElement[i].alt||"From Email"==perAttrElement[i].alt){if(!MessageHelper.isValidUTF8length(perAttrElement[i].value,256))return MessageHelper.formErrorHandleClient(perAttrElement[i].id,MessageHelper.messages.ERROR_EmailTooLong,"below"),void dojo.addClass(perAttrElement[i].id,"input-error");if(!MessageHelper.isValidEmail(perAttrElement[i].value))return MessageHelper.formErrorHandleClient(perAttrElement[i].id,MessageHelper.messages.ERROR_INVALIDEMAILFORMAT,"below"),void dojo.addClass(perAttrElement[i].id,"input-error")}}}entitledItemJSON=null!=dojo.byId(entitledItemId)?eval("("+dojo.byId(entitledItemId).innerHTML+")"):this.getEntitledItemJsonObject(),this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId(entitledItemId);if(null!=catalogEntryId){var productId=entitledItemId.substring(entitledItemId.indexOf("_")+1),maxQuantity=-1;void 0!==productDisplayJS.inventoryList&&productId in productDisplayJS.inventoryList&&catalogEntryId in productDisplayJS.inventoryList[productId]&&(maxQuantity=productDisplayJS.inventoryList[productId][catalogEntryId]),-1!=maxQuantity&&quantity>maxQuantity?shoppingActionsJS.quantityLimitReached(productId,maxQuantity):(this.AddItem2ShopCartAjax(catalogEntryId,quantity,customParams,productId),this.baseItemAddedToCart=!0,null!=dijit.byId("second_level_category_popup")&&hidePopup("second_level_category_popup"),dojo.byId(productId+"_increment")&&(dojo.byId(productId+"_increment").disabled=!1),dojo.byId("quantity_"+productId)&&(dojo.byId("quantity_"+productId).value="1"))}else 1==isPopup?(dojo.byId("second_level_category_popup").style.zIndex="1",MessageHelper.formErrorHandleClient("addToCartLinkAjax",storeNLS.ERR_RESOLVING_SKU)):(MessageHelper.displayErrorMessage(storeNLS.ERR_RESOLVING_SKU),this.baseItemAddedToCart=!1)}}},AddItem2ShopCartAjax:function(e,t,i,r){if(browseOnly)MessageHelper.displayErrorMessage(storeNLS.ERROR_ADD2CART_BROWSE_ONLY);else if("true"!=this.isGun){var o=[];""!=this.storeId&&(o.storeId=this.storeId),""!=this.catalogId&&(o.catalogId=this.catalogId),o.langId=this.langId,o.orderId=".",o.inventoryValidation="true",o.calculateOrder="0";var d="AddOrderItem";if(null==this.storeId||void 0===WCParamJS.storeId||""==WCParamJS.storeId||""!=this.storeId&&0!==this.storeId.trim().length||(o.storeId=WCParamJS.storeId),null==this.catalogId||void 0===WCParamJS.catalogId||""==WCParamJS.catalogId||""!=this.catalogId&&0!==this.catalogId.trim().length||(o.catalogId=WCParamJS.catalogId),this.productAddedList=new Object,dojo.isArray(e)&&dojo.isArray(t))for(var a=0;a<e.length;a++){if(!isPositiveInteger(t[a]))return void MessageHelper.displayErrorMessage(storeNLS.QUANTITY_INPUT_ERROR);o["catEntryId_"+(a+1)]=e[a],o["quantity_"+(a+1)]=t[a]}else{if(isPositiveInteger(t)||(t=1),dojo.byId("pdp_delivery_frequency")&&dojo.byId("subscription_radio").checked){if(""==shoppingActionsJS.subscriptionFrequency){var n=dojo.byId("frequencyOptions").getElementsByClassName("selected_frequency");void 0!==n&&0!=n.length&&(shoppingActionsJS.subscriptionFrequency=n[0].id)}if(""==shoppingActionsJS.subscriptionFrequency)return void MessageHelper.displayErrorMessage(storeNLS.ERROR_DELIVERY_FREQUENCY);o.subscriptionFrequency=shoppingActionsJS.subscriptionFrequency}var s=!1,l=dojo.byId("gg-for-input-"+e);null!=l&&l.checked?(o.catEntryId_1=e,o.quantity_1=t,o.catEntryId_2=l.value,o.quantity_2=t,a++,s=!0,null==i&&(i=new Object),i.field2_2=e):(o.catEntryId=e,o.quantity=t);var c=new Object;for(attr in this.selectedAttributesList["entitledItem_"+r])c[attr]=this.selectedAttributesList["entitledItem_"+r][attr];void 0==r?this.saveAddedProductInfo(t,e,e,c):this.saveAddedProductInfo(t,r,e,c),s&&shoppingActionsJS.saveAddedProductInfo(t,l.value,l.value,null,!0)}if(null!=i&&"undefined"!=i){for(a in i)o[a]=i[a];"dynamicKit"==i.catalogEntryType&&(d="AddPreConfigurationToCart")}var u=document.getElementsByName("contractSelectForm_contractId");if(null!=u&&"undefined"!=u)for(a=0;a<u.length;a++)if(u[a].checked){o.contractId=u[a].value;break}var m=getCookie("GR"),I=0,p=0;if(void 0!==o.catEntryId?p=o.catEntryId:void 0!==o.catEntryId_1&&(p=o.catEntryId_1),"undefined"!=typeof productDisplayJS&&void 0!==productDisplayJS.entitledItems&&productDisplayJS.entitledItems.length>0&&0!=p){var _=productDisplayJS.entitledItems.length;for(a=0;a<_;a++)if(productDisplayJS.entitledItems[a].catentry_id==p){I=productDisplayJS.entitledItems[a].partNumber+",";break}}else if("undefined"!=typeof productDisplayJS&&void 0!==productDisplayJS.entitledItems&&0==productDisplayJS.entitledItems.length&&0!=p&&byId("entitledItem_"+r)&&""!=byId("entitledItem_"+r).innerHTML){var y=dojo.fromJson(byId("entitledItem_"+r).innerHTML);for(_=y.length,a=0;a<_;a++)if(y[a].catentry_id==p){I=y[a].partNumber+",";break}}if(void 0!==m&&0!=I){var h=m.slice(m.indexOf(I),m.indexOf("||",m.indexOf(I)));""!=h&&(o.grCookie=h)}submitRequest()&&(cursor_wait(),$("html").css("overflow","hidden"),wc.service.invoke(d,o),this.baseItemAddedToCart=!0,document.getElementById("headerShopCartLink")&&"none"!=document.getElementById("headerShopCartLink").style.display?document.getElementById("headerShopCart").focus():document.getElementById("headerShopCart1")&&document.getElementById("headerShopCart1").focus())}else if("undefined"!=typeof FirearmsDisplayJS&&document.querySelector("input[data-firearm-url]")){var g=document.querySelector("input[data-firearm-url]").value;FirearmsDisplayJS.orderFirearmsOnline(e,t,g)}},AddClubItem2ShopCartFromOrdDetailAjax:function(e,t,i,r){if(browseOnly)MessageHelper.displayErrorMessage(storeNLS.ERROR_ADD2CART_BROWSE_ONLY);else{var o=!1,d="isClubExclusive_"+e;if(dojo.byId(d)&&"true"==dojo.byId(d).value){if("undefined"!=typeof isGuest&&null!=isGuest&&0==isGuest&&dojo.byId("savedCards")&&"true"==dojo.byId("savedCards").value)o=!0;else{if("undefined"!=typeof isGuest&&null!=isGuest&&0==isGuest&&dojo.byId("savedCards")&&"false"==dojo.byId("savedCards").value)return getClubWalletItems();if("undefined"!=typeof isGuest&&null!=isGuest&&1==isGuest)return clubExclusiveGuestOverlay(),!1}if(1==o){var a={};a.storeId=this.storeId,a.catalogId=this.catalogId,a.langId=this.langId,a.orderId=".",a.inventoryValidation="true",a.calculateOrder="0";var n="AddOrderItem";if(shoppingActionsJS.productAddedList=new Object,dojo.isArray(e)&&dojo.isArray(t))for(var s=0;s<e.length;s++){if(!isPositiveInteger(t[s]))return void MessageHelper.displayErrorMessage(storeNLS.QUANTITY_INPUT_ERROR);a["catEntryId_"+(s+1)]=e[s],a["quantity_"+(s+1)]=t[s]}else{if(!isPositiveInteger(t))return void MessageHelper.displayErrorMessage(storeNLS.QUANTITY_INPUT_ERROR);a.catEntryId=e,a.quantity=t;var l=new Object;for(attr in productDisplayJS.selectedAttributesList["entitledItem_"+r])l[attr]=productDisplayJS.selectedAttributesList["entitledItem_"+r][attr];void 0==r?shoppingActionsJS.saveAddedProductInfo(t,e,e,l):shoppingActionsJS.saveAddedProductInfo(t,r,e,l)}if(null!=i&&"undefined"!=i){for(s in i)a[s]=i[s];"dynamicKit"==i.catalogEntryType&&(n="AddPreConfigurationToCart")}var c=document.getElementsByName("contractSelectForm_contractId");if(null!=c&&"undefined"!=c)for(s=0;s<c.length;s++)if(c[s].checked){a.contractId=c[s].value;break}if(!submitRequest())return;cursor_wait();var u=!1;if("undefined"!=typeof callCenterIntegrationJS&&void 0!=callCenterIntegrationJS&&null!=callCenterIntegrationJS){var m=productDisplayJS.itemPriceJsonOject[a.catEntryId].catalogEntry.catalogEntryIdentifier.externalIdentifier.partNumber,I={};I.partNumber=m,u=callCenterIntegrationJS.consumeAddToCartEvent(a,I)}u||wc.service.invoke(n,a),productDisplayJS.baseItemAddedToCart=!0,document.getElementById("headerShopCartLink")&&"none"!=document.getElementById("headerShopCartLink").style.display?document.getElementById("headerShopCart").focus():document.getElementById("headerShopCart1")&&document.getElementById("headerShopCart1").focus()}}}},AddFBT2ShopCartAjax:function(){if(browseOnly)MessageHelper.displayErrorMessage(storeNLS.ERROR_ADD2CART_BROWSE_ONLY);else{var e=document.forms.FrequenctlyBought_Form,t=[];t.storeId=this.storeId,t.catalogId=this.catalogId,t.langId=this.langId,t.orderId=".",t.inventoryValidation="true",t.calculateOrder="0",t.addToCartType="FBT";this.productAddedList=new Object;for(var i=e.querySelectorAll('input[type="checkbox"]:checked'),r=0;r<i.length;r++)t["catEntryId_"+(r+1)]=i[r].value,t["quantity_"+(r+1)]="1";submitRequest()&&(cursor_wait(),wc.service.invoke("AddOrderItem",t))}},AddBundle2ShopCartAjax:function(){if(browseOnly)MessageHelper.displayErrorMessage(storeNLS.ERROR_ADD2CART_BROWSE_ONLY);else{var e=[];e.storeId=this.storeId,e.catalogId=this.catalogId,e.langId=this.langId,e.orderId=".",e.inventoryValidation="true",e.calculateOrder="0";var t=1;this.productAddedList=new Object;var i=!0;for(productId in this.productList){var r=this.productList[productId],o=dojo.number.parse(r.quantity);if(0!=o&&null!=r.id){if(0==r.id)return void MessageHelper.displayErrorMessage(storeNLS.ERR_RESOLVING_SKU);if(isNaN(o)||o<0)return void MessageHelper.displayErrorMessage(storeNLS.QUANTITY_INPUT_ERROR);e["catEntryId_"+t]=r.id,e["quantity_"+t++]=o,this.baseItemAddedToCart=!0,this.saveAddedProductInfo(o,productId,r.id,this.selectedProducts[productId]),i=!1}}i?MessageHelper.displayErrorMessage(storeNLS.ERR_RESOLVING_SKU):submitRequest()&&(cursor_wait(),wc.service.invoke("AddOrderItem",e))}},resetProductAddedList:function(){shoppingActionsJS.productAddedList=new Object},resetViewToggleObjects:function(){shoppingActionsJS.allSwatchesArrayList=new Object,shoppingActionsJS.selectedAttributesList=new Object},saveAddedProductInfo:function(e,t,i,r){var o="";null!=document.getElementById("ProductInfoName_"+t)?o=document.getElementById("ProductInfoName_"+t).value:null!=document.getElementById("ProductInfoName_"+i)&&(o=document.getElementById("ProductInfoName_"+i).value);var d="";null!=document.getElementById("ProductInfoImage_"+t)?d=document.getElementById("ProductInfoImage_"+t).value:null!=document.getElementById("ProductInfoImage_"+i)&&(d=document.getElementById("ProductInfoImage_"+i).value);var a="";null!=document.getElementById("ProductInfoPrice_"+t)?a=document.getElementById("ProductInfoPrice_"+t).value:null!=document.getElementById("ProductInfoPrice_"+i)&&(a=document.getElementById("ProductInfoPrice_"+i).value),null!=document.getElementById("ProductInfoPrice_"+i)&&(a=document.getElementById("ProductInfoPrice_"+i).value);var n=[o,d,a,e,r];t!=i?this.productAddedList[i]=n:this.productAddedList[t]=n,dojo.topic.publish("ProductInfo_Added",this.productAddedList)},setSKUImageId:function(e){this.skuImageId=e},getImageForSKU:function(e,t){var i=[],r=this.selectedAttributesList[e];for(attribute in r)i.push(attribute+"_|_"+r[attribute]);return this.resolveImageForSKU(i,t)},resolveImageForSKU:function(e,t){console.debug("Resolving SKU >> "+e+">>"+this.entitledItems);var i="",r=e.length;for(x in this.entitledItems){if(null!=t)i=this.entitledItems[x][t];else i=this.entitledItems[x].ItemImage467;var o=this.entitledItems[x].Attributes,d=0;for(index in o)d++;if(0==r&&0==d)return i;if(0!=d&&r>=d){var a=0;for(attributeName in e){e[attributeName]in o&&a++}if(d==a){console.debug("ItemImage:"+i+" for Attribute: "+e),this.disableBuyButtonforUnbuyable(x);var n=[];return n.push(i),n.push(this.entitledItems[x].ItemThumbnailImage),null!=this.entitledItems[x].ItemAngleThumbnail&&void 0!=this.entitledItems[x].ItemAngleThumbnail&&(n.push(this.entitledItems[x].ItemAngleThumbnail),n.push(this.entitledItems[x].ItemAngleFullImage)),n}}}return null},disableBuyButtonforUnbuyable:function(e){var t=this.entitledItems[e].buyable,i=document.getElementById("listViewAdd2Cart_"+this.entitledItems[e].productId);null!=t&&null!=i&&(i.style.display="false"==t?"none":"")},changeViewImages:function(e,t){var i=0;for(x in e){var r=i;i++,null!=dojo.byId("WC_CachedProductOnlyDisplay_images_1_"+i)&&(dojo.byId("WC_CachedProductOnlyDisplay_images_1_"+i).src=e[x]),null!=dojo.byId("WC_CachedProductOnlyDisplay_links_1_"+i)&&(dojo.byId("WC_CachedProductOnlyDisplay_links_1_"+i).href="JavaScript:changeThumbNail('productAngleLi"+r+"','"+t[x]+"');"),null!=dojo.byId("productAngleLi"+r)&&"selected"==dojo.byId("productAngleLi"+r).className&&changeThumbNail("productAngleLi"+r,t[x])}},changeProdImage:function(entitledItemId,swatchAttrName,swatchAttrValue,skuImageId,imageField){null!=dojo.byId(entitledItemId)&&(entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")")),this.setEntitledItems(entitledItemJSON);var productId=entitledItemId.substring(entitledItemId.indexOf("_")+1),skuImage=null,imageArr=shoppingActionsJS.getImageForSKU(entitledItemId,imageField);if(null!=imageArr&&(skuImage=imageArr[0]),void 0!=skuImageId&&this.setSKUImageId(skuImageId),null!=skuImage){if(null!=dojo.byId(this.skuImageId)){document.getElementById(this.skuImageId).src=skuImage,null!=document.getElementById("ProductInfoImage_"+productId)&&(document.getElementById("ProductInfoImage_"+productId).value=skuImage);var itemAngleThumbnail=imageArr[2],itemAngleFullImage=imageArr[3];null!=itemAngleThumbnail&&void 0!=itemAngleThumbnail&&shoppingActionsJS.changeViewImages(itemAngleThumbnail,itemAngleFullImage)}}else{var imageFound=!1;for(x in this.entitledItems){var Attributes=this.entitledItems[x].Attributes;if(null!=imageField)var itemImage=this.entitledItems[x][imageField];else var itemImage=this.entitledItems[x].ItemImage467;var itemAngleThumbnail=this.entitledItems[x].ItemAngleThumbnail,itemAngleFullImage=this.entitledItems[x].ItemAngleFullImage;for(y in Attributes){var index=y.indexOf("_|_"),entitledSwatchName=y.substring(0,index),entitledSwatchValue=y.substring(index+3);if(entitledSwatchName==swatchAttrName&&entitledSwatchValue==swatchAttrValue){null!=dojo.byId(this.skuImageId)&&(dojo.byId(this.skuImageId).src=itemImage,null!=document.getElementById("ProductInfoImage_"+productId)&&(document.getElementById("ProductInfoImage_"+productId).value=itemImage)),null!=itemAngleThumbnail&&void 0!=itemAngleThumbnail&&shoppingActionsJS.changeViewImages(itemAngleThumbnail,itemAngleFullImage),imageFound=!0;break}}if(imageFound)break}}},updateSwatchListView:function(){for(var swatchArray=dojo.query("a[id^='swatch_array_']"),i=0;i<swatchArray.length;i++){var swatchArrayElement=swatchArray[i];eval(dojo.attr(swatchArrayElement,"href"))}for(var swatchSkuImage=dojo.query("a[id^='swatch_setSkuImage_']"),i=0;i<swatchSkuImage.length;i++){var swatchSkuImageElement=swatchSkuImage[i];eval(dojo.attr(swatchSkuImageElement,"href"))}},selectSwatch:function(e,t,i,r,o,d,a,n){try{if(document.querySelectorAll("#swatch_"+i+"_"+t)&&document.querySelectorAll("#swatch_"+i+"_"+t).length>1&&document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]")){if(dojo.query('[id="swatch_'+i+"_"+t+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]"))&&1==dojo.query('[id="swatch_'+i+"_"+t+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]")).length&&dojo.hasClass(dojo.query('[id="swatch_'+i+"_"+t+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]"))[0],"color_swatch_disabled"))return}else if(dojo.hasClass("swatch_"+i+"_"+t,"color_swatch_disabled"))return}catch(e){if(dojo.byId("swatch_"+i+"_"+t)&&dojo.hasClass("swatch_"+i+"_"+t,"color_swatch_disabled"))return}var s=this.selectedAttributesList[i];for(attribute in s){if(attribute==e&&s[attribute]!=t){try{if(document.querySelectorAll("#swatch_"+i+"_"+s[attribute])&&document.querySelectorAll("#swatch_"+i+"_"+s[attribute]).length>1&&document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]")){if(dojo.query('[id="swatch_'+i+"_"+s[attribute]+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]"))&&1==dojo.query('[id="swatch_'+i+"_"+s[attribute]+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]")).length)var l=dojo.query('[id="swatch_'+i+"_"+s[attribute]+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]"))[0]}else l=dojo.byId("swatch_"+i+"_"+s[attribute])}catch(e){l=dojo.byId("swatch_"+i+"_"+s[attribute])}l&&(l.className="color_swatch");try{document.querySelectorAll("#swatch_link_"+i+"_"+s[attribute])&&document.querySelectorAll("#swatch_link_"+i+"_"+s[attribute]).length>1&&document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]")?dojo.query('[id="swatch_link_'+i+"_"+s[attribute]+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]"))&&1==dojo.query('[id="swatch_link_'+i+"_"+s[attribute]+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]")).length&&(dojo.query('[id="swatch_link_'+i+"_"+s[attribute]+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]"))[0].title=l.alt):dojo.byId("swatch_link_"+i+"_"+s[attribute]).title=l.alt}catch(e){l&&(dojo.byId("swatch_link_"+i+"_"+s[attribute]).title=l.alt)}}try{null!=document.getElementById("swatch_link_"+i+"_"+s[attribute])&&document.querySelectorAll("#swatch_link_"+i+"_"+s[attribute])&&document.querySelectorAll("#swatch_link_"+i+"_"+s[attribute]).length>1&&document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]")?dojo.query('[id="swatch_link_'+i+"_"+s[attribute]+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]"))&&1==dojo.query('[id="swatch_link_'+i+"_"+s[attribute]+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]")).length&&dojo.query('[id="swatch_link_'+i+"_"+s[attribute]+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]"))[0].setAttribute("aria-checked","false"):null!=document.getElementById("swatch_link_"+i+"_"+s[attribute])&&document.getElementById("swatch_link_"+i+"_"+s[attribute]).setAttribute("aria-checked","false")}catch(e){null!=document.getElementById("swatch_link_"+i+"_"+s[attribute])&&document.getElementById("swatch_link_"+i+"_"+s[attribute]).setAttribute("aria-checked","false")}}this.makeSwatchSelection(e,t,i,r,o,d,a,n)},makeSwatchSelection:function(e,t,i,r,o,d,a,n){this.setSelectedAttribute(e,t,i,d,a);try{document.querySelectorAll("#swatch_"+i+"_"+t)&&document.querySelectorAll("#swatch_"+i+"_"+t).length>1&&document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]")&&document.querySelectorAll("#swatch_link_"+i+"_"+t)&&document.querySelectorAll("#swatch_link_"+i+"_"+t).length>1?(dojo.query('[id="swatch_'+i+"_"+t+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]"))&&1==dojo.query('[id="swatch_'+i+"_"+t+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]")).length&&(dojo.query('[id="swatch_'+i+"_"+t+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]"))[0].className="color_swatch_selected"),dojo.query('[id="swatch_link_'+i+"_"+t+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]"))&&1==dojo.query('[id="swatch_link_'+i+"_"+t+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]")).length&&dojo.query('[id="swatch_link_'+i+"_"+t+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+i.split("entitledItem_")[1]+"_"+e+"]"))[0].setAttribute("aria-checked","true")):(document.getElementById("swatch_"+i+"_"+t).className="color_swatch_selected",document.getElementById("swatch_link_"+i+"_"+t).setAttribute("aria-checked","true"))}catch(e){document.getElementById("swatch_"+i+"_"+t)&&(document.getElementById("swatch_"+i+"_"+t).className="color_swatch_selected"),document.getElementById("swatch_link_"+i+"_"+t)&&document.getElementById("swatch_link_"+i+"_"+t).setAttribute("aria-checked","true")}document.getElementById("swatch_selection_label_"+i+"_"+e).className="header color_swatch_label","none"==document.getElementById("swatch_selection_"+i+"_"+e).style.display&&(document.getElementById("swatch_selection_"+i+"_"+e).style.display="inline"),document.getElementById("swatch_selection_"+i+"_"+e).innerHTML=null!=o?o:t,this.updateSwatchImages(e,i,r,a,n)},addToAllSwatchsArray:function(e,t,i,r,o,d){var a=this.allSwatchesArrayList[r];if(null==a&&(a=new Array),!this.existInAllSwatchsArray(e,t,a)){var n=new Array;n[0]=e,n[1]=t,n[2]=i,document.getElementById("swatch_link_"+r+"_"+t)?n[4]=document.getElementById("swatch_link_"+r+"_"+t).onclick:n[4]=null,n[5]=null,n[6]=o,n[7]=d,a.push(n),this.allSwatchesArrayList[r]=a}},existInAllSwatchsArray:function(e,t,i){for(var r=0;r<i.length;r++){var o=i[r][0],d=i[r][1];if(o==e&&d==t)return!0}return!1},makeDefaultSwatchSelection:function(entitledItemId,doNotDisable){for(x in 0==this.entitledItems.length&&(null!=dojo.byId(entitledItemId)&&(entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")")),this.setEntitledItems(entitledItemJSON)),this.entitledItems){var Attributes=this.entitledItems[x].Attributes;for(y in Attributes){var index=y.indexOf("_|_"),swatchName=y.substring(0,index),swatchValue=y.substring(index+3);this.makeSwatchSelection(swatchName,swatchValue,entitledItemId,doNotDisable,null,imageField)}break}},updateSwatchImages:function(e,t,i,r,o){for(var d=new Array,a=this.selectedAttributesList[t],n=a[e],s=this.allSwatchesArrayList[t],l=0;l<s.length;l++){var c=s[l][0],u=s[l][1],m=s[l][2],I=(s[l][3],s[l][4]),p=s[l][6],_=s[l][7];if(c!=e){var h=new Array;h[0]=c,h[1]=u,h[2]=m,h[4]=I,h[5]=!1,h[6]=p,h[7]=_,d.push(h)}}for(x in this.entitledItems){var g=this.entitledItems[x].Attributes;for(y in g){var b=y.indexOf("_|_"),f=y.substring(0,b),v=y.substring(b+3);if(f==e&&v==n)for(z in g){var S=z.indexOf("_|_"),A=z.substring(0,S),E=z.substring(S+3);if(y!=z)for(l in d){var j=d[l][0],C=d[l][1];A==j&&E==C&&(d[l][5]=!0)}}}}var w=[];for(l in d){j=d[l][0],C=d[l][1],d[l][2],d[l][3];var P=d[l][4],k=d[l][5],q=d[l][7];if(k)try{if(document.querySelectorAll("#swatch_"+t+"_"+C)&&document.querySelectorAll("#swatch_"+t+"_"+C).length>1&&document.querySelector("div[aria-describedby=swatch_ACCE_description_"+t.split("entitledItem_")[1]+"_"+j+"]")&&document.querySelectorAll("#swatch_link_"+t+"_"+C)&&document.querySelectorAll("#swatch_link_"+t+"_"+C).length>1){if(dojo.query('[id="swatch_'+t+"_"+C+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+t.split("entitledItem_")[1]+"_"+j+"]"))&&1==dojo.query('[id="swatch_'+t+"_"+C+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+t.split("entitledItem_")[1]+"_"+j+"]")).length&&dojo.query('[id="swatch_link_'+t+"_"+C+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+t.split("entitledItem_")[1]+"_"+j+"]"))&&1==dojo.query('[id="swatch_link_'+t+"_"+C+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+t.split("entitledItem_")[1]+"_"+j+"]")).length){if("color_swatch_selected"!=dojo.query('[id="swatch_'+t+"_"+C+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+t.split("entitledItem_")[1]+"_"+j+"]"))[0].className){(N=dojo.query('[id="swatch_'+t+"_"+C+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+t.split("entitledItem_")[1]+"_"+j+"]"))[0]).className="color_swatch";var B=dojo.byId("swatch_link_"+t+"_"+C);if(dojo.query("div",B)&&dojo.query("div",B).length>0)var O=dojo.query("div",B)[0];q==o&&(N.style.removeProperty("opacity"),O.style.display="none"),dojo.query('[id="swatch_link_'+t+"_"+C+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+t.split("entitledItem_")[1]+"_"+j+"]"))[0].title=N.alt}dojo.query('[id="swatch_link_'+t+"_"+C+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+t.split("entitledItem_")[1]+"_"+j+"]"))[0].setAttribute("aria-disabled","false"),dojo.query('[id="swatch_link_'+t+"_"+C+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+t.split("entitledItem_")[1]+"_"+j+"]"))[0].onclick=P}}else{if("color_swatch_selected"!=document.getElementById("swatch_"+t+"_"+C).className){(N=dojo.byId("swatch_"+t+"_"+C)).className="color_swatch";B=dojo.byId("swatch_link_"+t+"_"+C);if(dojo.query("div",B)&&dojo.query("div",B).length>0)O=dojo.query("div",B)[0];N.className="color_swatch",useThisSelectedAttributes[j]==C&&(N.className="color_swatch_selected"),q==o&&(N.style.removeProperty("opacity"),O.style.display="none"),dojo.byId("swatch_link_"+t+"_"+C).title=N.alt}document.getElementById("swatch_link_"+t+"_"+C).setAttribute("aria-disabled","false"),document.getElementById("swatch_link_"+t+"_"+C).onclick=P}}catch(e){if("color_swatch_selected"!=document.getElementById("swatch_"+t+"_"+C).className){(N=dojo.byId("swatch_"+t+"_"+C)).className="color_swatch";B=dojo.byId("swatch_link_"+t+"_"+C);if(dojo.query("div",B)&&dojo.query("div",B).length>0)O=dojo.query("div",B)[0];q==o&&(N.style.removeProperty("opacity"),O.style.display="none"),dojo.byId("swatch_link_"+t+"_"+C).title=N.alt}document.getElementById("swatch_link_"+t+"_"+C).setAttribute("aria-disabled","false"),document.getElementById("swatch_link_"+t+"_"+C).onclick=P}else{try{if(document.querySelectorAll("#swatch_"+t+"_"+C)&&document.querySelectorAll("#swatch_"+t+"_"+C).length>1&&document.querySelector("div[aria-describedby=swatch_ACCE_description_"+t.split("entitledItem_")[1]+"_"+j+"]")&&document.querySelectorAll("#swatch_link_"+t+"_"+C)&&document.querySelectorAll("#swatch_link_"+t+"_"+C).length>1){if(dojo.query('[id="swatch_'+t+"_"+C+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+t.split("entitledItem_")[1]+"_"+j+"]"))&&1==dojo.query('[id="swatch_'+t+"_"+C+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+t.split("entitledItem_")[1]+"_"+j+"]")).length&&dojo.query('[id="swatch_link_'+t+"_"+C+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+t.split("entitledItem_")[1]+"_"+j+"]"))&&1==dojo.query('[id="swatch_link_'+t+"_"+C+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+t.split("entitledItem_")[1]+"_"+j+"]")).length){var N=dojo.query('[id="swatch_'+t+"_"+C+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+t.split("entitledItem_")[1]+"_"+j+"]"))[0];B=dojo.query('[id="swatch_link_'+t+"_"+C+'"]',document.querySelector("div[aria-describedby=swatch_ACCE_description_"+t.split("entitledItem_")[1]+"_"+j+"]"))[0]}}else N=dojo.byId("swatch_"+t+"_"+C),B=dojo.byId("swatch_link_"+t+"_"+C);if(dojo.query("div",B)&&dojo.query("div",B).length>0)O=dojo.query("div",B)[0]}catch(e){N=dojo.byId("swatch_"+t+"_"+C),B=dojo.byId("swatch_link_"+t+"_"+C);if(dojo.query("div",B)&&dojo.query("div",B).length>0)O=dojo.query("div",B)[0]}q!=o&&null!=N&&(N.className="color_swatch_disabled"),null!=B&&(B.onclick=null),String.prototype.endsWith||(String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)}),null!=N&&(N.src.endsWith("_disabled")||q!=o||(N.style.opacity="0.7",O.style.removeProperty("display"),N.className="color_swatch_disabled"));var R=storeNLS.INV_ATTR_UNAVAILABLE;B.title=dojo.string.substitute(R,{0:N.alt}),B.setAttribute("aria-disabled","true"),a[j]==C&&w.push(d[l])}}for(l in w){var T=w[l][0],L=w[l][1];for(l in d){j=d[l][0],C=d[l][1];var J=d[l][6];k=d[l][5],q=d[l][7];if(j==T&&C!=L&&k){this.makeSwatchSelection(j,C,t,i,J,null,r,q);break}}}},changePrice:function(entitledItemId,isPopup,displayPriceRange,productId){var entitledItemJSON;this.displayPriceRange=displayPriceRange,this.isPopup=isPopup,entitledItemJSON=null==dojo.byId(entitledItemId)||this.isPopup?this.getEntitledItemJsonObject():eval("("+dojo.byId(entitledItemId).innerHTML+")");var catalogEntryId=null;if(this.setEntitledItems(entitledItemJSON),this.selectedProducts[productId])var catalogEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[productId]);else var catalogEntryId=this.getCatalogEntryId(entitledItemId);if(null!=catalogEntryId)if(null!=this.itemPriceJsonOject[catalogEntryId]&&"undefined"!=this.itemPriceJsonOject[catalogEntryId])this.displayPrice(this.itemPriceJsonOject[catalogEntryId].catalogEntry,productId),console.debug("ShoppingActions.changePrice: using stored json object.");else{var parameters={};parameters.storeId=this.storeId,parameters.langId=this.langId,parameters.catalogId=this.catalogId,parameters.catalogEntryId=catalogEntryId,parameters.productId=productId,wc.service.declare({id:"getCatalogEntryDetailsSA",actionId:"getCatalogEntryDetailsSA",url:getAbsoluteURL()+appendWcCommonRequestParameters("GetCatalogEntryDetailsByIDView"),formId:"",successHandler:function(e,t){shoppingActionsJS.displayPriceServiceResponse(e,t)},failureHandler:function(e,t){console.debug("ShoppingActions.changePrice: Unexpected error occurred during an xhrPost request.")}}),wc.service.invoke("getCatalogEntryDetailsSA",parameters)}else console.debug("ShoppingActions.changePrice: all attributes are not selected.")},displayPriceServiceResponse:function(e,t){var i=t.args.content.productId;shoppingActionsJS.itemPriceJsonOject[e.catalogEntry.catalogEntryIdentifier.uniqueID]=e,shoppingActionsJS.displayPrice(e.catalogEntry,i)},displayPrice:function(e,t){var i,r=shoppingActionsJS.isPopup;if(document.getElementById("sezzlePDPWidget")&&productDisplayJS.calculateSezzleFourOrSizPayOffer(e.offerPrice),1==r&&(document.getElementById("productPrice").innerHTML=e.offerPrice,document.getElementById("productName").innerHTML=e.description[0].name,document.getElementById("productSKUValue").innerHTML=e.catalogEntryIdentifier.externalIdentifier.partNumber),0==r){var o="",d=dojo.currency.parse(e.listPrice,{symbol:this.currencySymbol}),a=dojo.currency.parse(e.offerPrice,{symbol:this.currencySymbol});if(this.setPriceInProductList(t,a),"false"==e.listPriced||d<a?(o="<span id='offerPrice_"+e.catalogEntryIdentifier.uniqueID+"' class='price'>"+e.offerPrice+"</span>",e.offerPrice&&(document.getElementById("price_display_"+t).innerHTML=o+"<input type='hidden' id='ProductInfoPrice_"+e.catalogEntryIdentifier.uniqueID+"' value='"+e.offerPrice+"'/>")):(o="<span id='offerPrice_"+e.catalogEntryIdentifier.uniqueID+"' class='price sale'>"+e.offerPrice+"</span><br/>",e.catalogEntryIdentifier.uniqueID,e.listPrice,e.offerPrice&&e.listPrice&&(document.getElementById("price_display_"+t).innerHTML=o+"<input type='hidden' id='ProductInfoPrice_"+e.catalogEntryIdentifier.uniqueID+"' value='"+e.offerPrice+"'/>")),o="",1==shoppingActionsJS.displayPriceRange)for(var n in e.priceRange)e.priceRange[n].endingNumberOfUnits==e.priceRange[n].startingNumberOfUnits?(i=storeNLS.PQ_PRICE_X,o=o+"<p>"+dojo.string.substitute(i,{0:e.priceRange[n].startingNumberOfUnits})):"null"!=e.priceRange[n].endingNumberOfUnits?(i=storeNLS.PQ_PRICE_X_TO_Y,o=o+"<p>"+dojo.string.substitute(i,{0:e.priceRange[n].startingNumberOfUnits,1:e.priceRange[n].endingNumberOfUnits})):(i=storeNLS.PQ_PRICE_X_OR_MORE,o=o+"<p>"+dojo.string.substitute(i,{0:e.priceRange[n].startingNumberOfUnits})),o=o+" <span class='price'>"+e.priceRange[n].localizedPrice+"</span></p>";var s=dojo.byId("productLevelPriceRange_"+t),l=dojo.byId("itemLevelPriceRange_"+t);null!=s&&null==l?dojo.style(s,"display",""):""!=o&&null!=l?(o=storeNLS.PQ_PURCHASE+o,l.innerHTML=o,dojo.style(l,"display",""),null!=s&&dojo.style(s,"display","none")):""==o&&(null!=l&&dojo.style(l,"display","none"),null!=s&&dojo.style(s,"display",""));var c=dojo.query("#product_name_"+t+" > a");e.description[0].name&&(1==c.length?c[0].innerHTML=e.description[0].name:dojo.byId("product_name_"+t)&&(dojo.byId("product_name_"+t).innerHTML=e.description[0].name),null!=dojo.query("#widget_product_info_viewer > div[id^='PageHeading_']")&&dojo.query("#widget_product_info_viewer > div[id^='PageHeading_']").forEach(function(t){null!=t.childNodes&&3==t.childNodes.length&&(t.childNodes[1].innerHTML=e.description[0].name)}),null!=document.getElementById("ProductInfoName_"+t)&&(document.getElementById("ProductInfoName_"+t).value=e.description[0].name),null!=document.getElementById("product_special_tag_"+t)&&("true"===e.skuSale?(document.getElementById("product_special_tag_"+t).innerHTML="Sale",document.getElementById("product_special_tag_"+t).className="plp_special_title_saleclearance"):"true"===e.skuClearance?(document.getElementById("product_special_tag_"+t).innerHTML="Clearance",document.getElementById("product_special_tag_"+t).className="plp_special_title_saleclearance"):"true"===e.skuRebate?(document.getElementById("product_special_tag_"+t).innerHTML="Rebate",document.getElementById("product_special_tag_"+t).className="plp_special_title_rebatespecialoffer"):"true"===e.skuSpecialOffer?(document.getElementById("product_special_tag_"+t).innerHTML="Special Offer",document.getElementById("product_special_tag_"+t).className="plp_special_title_rebatespecialoffer"):"true"===e.skuNew?(document.getElementById("product_special_tag_"+t).innerHTML="New",document.getElementById("product_special_tag_"+t).className="plp_special_title_new"):(document.getElementById("product_special_tag_"+t).innerHTML="",document.getElementById("product_special_tag_"+t).className=""))),document.getElementById("product_shortdescription_"+t)&&e.description[0].shortDescription&&(document.getElementById("product_shortdescription_"+t).innerHTML=e.description[0].shortDescription),document.getElementById("product_SKU_"+t)&&(document.getElementById("product_SKU_"+t).innerHTML=storeNLS.SKU+" "+e.catalogEntryIdentifier.externalIdentifier.partNumber)}},showWCDialogPopup:function(e){var t=dijit.byId(e);null!=t?(t.closeButtonNode.style.display="none",t.show()):console.debug(e+" does not exist")},notifyAttributeChange:function(e){this.baseCatalogEntryId=e;this.selectedAttributesList["entitledItem_"+e];dojo.topic.publish("DefiningAttributes_Resolved_"+e,e,-1)},notifyQuantityChange:function(e){dojo.topic.publish("Quantity_Changed",e)},initCompare:function(e){if("compare"==e)this.checkForCompare();else{var t=this.cookieKeyPrefix+this.storeId;setCookie(t,"",{path:"/",domain:cookieDomain})}},changeCompareBox:function(e,t){box=document.getElementById(e),box.checked=!box.checked,this.addOrRemoveFromCompare(t,box.checked)},addOrRemoveFromCompare:function(e,t){t?this.addToCompare(e):this.removeFromCompare(e)},addToCompare:function(e){var t=this.cookieKeyPrefix+this.storeId,i=dojo.cookie(t);if(null==i||-1==i.indexOf(e)&&null!=e){var r=0;if(null!=i&&""!=i&&(r=i.split(this.cookieDelimiter).length),r<parseInt(this.maxNumberProductsAllowedToCompare)){var o="";o=null==i||""==i?e:i+this.cookieDelimiter+e,setCookie(t,o,{path:"/",domain:cookieDomain}),shoppingActionsJS.checkForCompare()}else this.showWCDialogPopup("widget_product_comparison_popup"),document.getElementById("comparebox_"+e).checked=!1,console.debug("You can only compare up to 4 products")}else MessageHelper.displayErrorMessage(storeNLS.COMPARE_ITEM_EXISTS)},removeFromCompare:function(e){var t=this.cookieKeyPrefix+this.storeId,i=dojo.cookie(t);if(null!=i){if(""==dojo.trim(i))setCookie(t,null,{expires:-1});else{var r=i.split(this.cookieDelimiter),o="";for(index in r)r[index]!=e&&(o=""==o?r[index]:o+this.cookieDelimiter+r[index]);setCookie(t,o,{path:"/",domain:cookieDomain}),o.split(this.cookieDelimiter).length}shoppingActionsJS.checkForCompare()}},compareProducts:function(e){var t=appendWcCommonRequestParameters("CompareProductsDisplayView?storeId="+this.storeId+"&catalogId="+this.catalogId+"&langId="+this.langId+"&compareReturnName="+encodeURIComponent(this.compareReturnName)+"&searchTerm="+this.searchTerm);""!=e.top_category&&(t=t+"&top_category="+e.top_category),""!=e.parent_category_rn&&(t=t+"&parent_category_rn="+e.parent_category_rn),""!=e.categoryId&&(t=t+"&categoryId="+e.categoryId);var i=this.cookieKeyPrefix+this.storeId,r=dojo.cookie(i);null!=r&&""!=dojo.trim(r)&&(t=t+"&catentryId="+r);var o=appendWcCommonRequestParameters(location.href);-1==o.indexOf("?")?o+="?fromPage=compare":-1==o.indexOf("fromPage=compare")&&(o+="&fromPage=compare"),t=t+"&returnUrl="+encodeURIComponent(o),location.href=getAbsoluteURL()+t},setProductQuantity:function(e,t,i,r){var o=null;this.productList[t]?o=this.productList[t]:(o=new Object,this.productList[t]=o,o.baseItemId=t,o.id="item"==e?t:0),o.quantity=i,dojo.topic.publish("Quantity_Changed",dojo.toJson(o)),o.price=dojo.number.parse(r)},quantityChanged:function(e,t){if(this.productList[e]){var i=this.productList[e];if(i.quantity=dojo.trim(t),dojo.topic.publish("Quantity_Changed",dojo.toJson(i)),null!=MerchandisingAssociationJS&&null!=MerchandisingAssociationJS.baseItemParams&&"BundleBean"==MerchandisingAssociationJS.baseItemParams.type)for(idx=0;idx<MerchandisingAssociationJS.baseItemParams.components.length;idx++)e!=MerchandisingAssociationJS.baseItemParams.components[idx].productId&&e!=MerchandisingAssociationJS.baseItemParams.components[idx].id||(MerchandisingAssociationJS.baseItemParams.components[idx].quantity=i.quantity)}},setPriceInProductList:function(e,t){var i=this.productList[e];i&&(i.price=t)},selectBundleItemSwatch:function(e,t,i,r){if(!dojo.hasClass("swatch_"+e+"_"+t+"_"+i,"color_swatch_disabled")){if(null!=dojo.byId("entitledItem_"+e)){var o,d=t+"_|_"+i;o=dojo.fromJson(dojo.byId("entitledItem_"+e).innerHTML);var a=new Array;for(idx in o){var n=!1,s=o[idx];for(attribute in s.Attributes)if(d==attribute){n=!0;break}if(n)for(attribute in s.Attributes){(u=attribute.substring(0,attribute.lastIndexOf("_|_")))!=r&&u!=t&&a.push(attribute)}}var l=new Array,c=new Array;for(idx in o){s=o[idx];for(attribute in s.Attributes){var u;if((u=attribute.substring(0,attribute.lastIndexOf("_|_")))!=r&&u!=t){var m="swatch_"+e+"_"+attribute;if(m=m.replace("_|_","_"),null!=dojo.byId(m)&&void 0!=dojo.byId(m)){var I=m.replace("swatch_","swatch_link_");if(dojo.indexOf(a,attribute)>-1)dojo.hasClass(m,"color_swatch_selected")||(dojo.byId(m).className="color_swatch",dojo.byId(m).src=dojo.byId(m).src.replace("_disabled",""),dojo.byId(I).title=dojo.byId(m).alt,document.getElementById(I).setAttribute("aria-disabled","false"));else if(-1==dojo.indexOf(l,attribute)){l.push(attribute),dojo.hasClass(m,"color_swatch_selected")&&c.push(m),dojo.byId(m).className="color_swatch_disabled",dojo.byId(m).src.endsWith("_disabled")||(dojo.byId(m).src=dojo.byId(m).src+"_disabled");var p=storeNLS.INV_ATTR_UNAVAILABLE,_=dojo.byId(m).alt;dojo.byId(I).title=dojo.string.substitute(p,{0:_}),document.getElementById(I).setAttribute("aria-disabled","true")}}}null!=document.getElementById("swatch_link_"+e+"_"+attribute)&&document.getElementById("swatch_link_"+e+"_"+attribute).setAttribute("aria-checked","false")}}for(idx in c){var y=c[idx],h=y.substring(0,y.lastIndexOf("_|_")),g=!1;dojo.query("[id^='"+h+"']").forEach(function(e,t,i){if(!g&&dojo.hasClass(e,"color_swatch")){var o=e.id.split("_");shoppingActionsJS.selectBundleItemSwatch(o[1],o[2],o[3],r),shoppingActionsJS.setSelectedAttributeOfProduct(o[1],o[2],o[3],!1),g=!0}})}}"none"==dojo.byId("swatch_selection_"+e+"_"+t).style.display&&(dojo.byId("swatch_selection_"+e+"_"+t).style.display="inline"),dojo.byId("swatch_selection_"+e+"_"+t).innerHTML=i;var b="swatch_"+e+"_"+t+"_",f="swatch_link_"+e+"_"+t+"_";dojo.query("img[id^='"+b+"']").forEach(function(e,t,i){dojo.hasClass(e,"color_swatch_disabled")?dojo.removeClass(e,"color_swatch"):dojo.addClass(e,"color_swatch"),dojo.removeClass(e,"color_swatch_selected")}),dojo.byId(b+i).className="color_swatch_selected",document.getElementById(f+i).setAttribute("aria-checked","true"),this.setSelectedAttributeOfProduct(e,t,i,!1),this.changeBundleItemImage(e,t,i,"productThumbNailImage_"+e)}},changeBundleItemImage:function(catalogEntryId,swatchAttrName,swatchAttrValue,skuImageId){var entitledItemId="entitledItem_"+catalogEntryId;null!=dojo.byId(entitledItemId)&&(entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")")),this.setEntitledItems(entitledItemJSON);var skuImage=null,imageArr=shoppingActionsJS.getImageForBundleItem(catalogEntryId);if(null!=imageArr&&(skuImage=imageArr[1]),void 0!=skuImageId&&this.setSKUImageId(skuImageId),null!=skuImage)null!=dojo.byId(this.skuImageId)&&(document.getElementById(this.skuImageId).src=skuImage,null!=document.getElementById("ProductInfoImage_"+catalogEntryId)&&(document.getElementById("ProductInfoImage_"+catalogEntryId).value=skuImage));else{var imageFound=!1;for(x in this.entitledItems){var Attributes=this.entitledItems[x].Attributes,itemImage=this.entitledItems[x].ItemThumbnailImage;for(y in Attributes){var index=y.indexOf("_|_"),entitledSwatchName=y.substring(0,index),entitledSwatchValue=y.substring(index+3);if(entitledSwatchName==swatchAttrName&&entitledSwatchValue==swatchAttrValue){document.getElementById(this.skuImageId).src=itemImage,null!=document.getElementById("ProductInfoImage_"+catalogEntryId)&&(document.getElementById("ProductInfoImage_"+catalogEntryId).value=itemImage),imageFound=!0;break}}if(imageFound)break}}},getImageForBundleItem:function(e){var t=[],i=this.selectedProducts[e];for(attribute in i)t.push(attribute+"_|_"+i[attribute]);return this.resolveImageForSKU(t)},checkForCompare:function(){},removeItemsFromCart:function(e){var t=[];t.storeId=WCParamJS.storeId,t.catalogId=WCParamJS.catalogId,t.langId=WCParamJS.langId;for(var i=e.getAttribute("data-orderitems").split(","),r=0;r<i.length;r++)t["orderItemId_"+(r+1)]=i[r];t.orderId=".",t.itemToAdd=e.getAttribute("data-catentryid"),t.fromErrorType=e.getAttribute("data-errortype"),t.itemToAddQty=e.getAttribute("data-quantity"),t.fromPage=MessageHelper.messages.ERROR_FROMPAGE,null!=e.getAttribute("data-frequency")&&(t.itemToAddFrequency=e.getAttribute("data-frequency")),wc.service.invoke("RemoveOrderItem",t)},replaceItemAjaxHelper:function(e,t,i,r,o,d){var a=[];a.storeId=WCParamJS.storeId,a.catalogId=WCParamJS.catalogId,a.langId=WCParamJS.langId,a.orderItemId=i,a.orderId=".",CheckoutHelperJS.shoppingCartPage?a.calculationUsage="-1,-2,-5,-6,-7,-10":a.calculationUsage="-1,-2,-3,-4,-5,-6,-7,-10";var n=[];n.storeId=WCParamJS.storeId,n.catalogId=WCParamJS.catalogId,n.langId=WCParamJS.langId,n.catEntryId=e,n.quantity=t,n.orderId=".",CheckoutHelperJS.shoppingCartPage?n.calculationUsage="-1,-2,-5,-6,-7,-10":n.calculationUsage="-1,-2,-3,-4,-5,-6,-7,-10";var s=[];s.storeId=WCParamJS.storeId,s.catalogId=WCParamJS.catalogId,s.langId=WCParamJS.langId,s.orderId=".",CheckoutHelperJS.shoppingCartPage?s.calculationUsage="-1,-2,-5,-6,-7,-10":s.calculationUsage="-1,-2,-3,-4,-5,-6,-7,-10";var l=!1,c=!0;null!=r&&""!=r&&(s.addressId=r),null!=o&&""!=o&&(s.shipModeId=o),null!=d&&""!=d&&(s.physicalStoreId=d,c=!1),null==s.shipModeId||null==s.addressId&&null==s.physicalStoreId||(l=!0),c&&(s.allocate="***",s.backorder="***",s.remerge="***",s.check="*n"),wc.service.declare({id:"AjaxReplaceItem",actionId:"AjaxReplaceItem",url:"AjaxRESTOrderItemDelete",formId:"",successHandler:function(e){l?wc.service.invoke("AjaxAddOrderItemTemp",n):wc.service.invoke("AjaxAddOrderItem",n)},failureHandler:function(e){e.errorMessage?MessageHelper.displayErrorMessage(e.errorMessage):e.errorMessageKey&&MessageHelper.displayErrorMessage(e.errorMessageKey),cursor_clear()}}),wc.service.declare({id:"AjaxAddOrderItemTemp",actionId:"AjaxAddOrderItemTemp",url:"AjaxRESTOrderItemAdd",formId:"",successHandler:function(e){s.orderItemId=null!=e.orderItem&&null!=e.orderItem[0].orderItemId?e.orderItem[0].orderItemId:e.orderItemId,MessageHelper.displayStatusMessage(MessageHelper.messages.SHOPCART_ADDED),wc.service.invoke("OrderItemAddressShipMethodUpdate",s)},failureHandler:function(e){MessageHelper.displayErrorMessage(e.errorMessageKey)}}),submitRequest()&&(cursor_wait(),wc.service.invoke("AjaxReplaceItem",a))},customizeDynamicKit:function(e,t,i){var r=[];if(r.storeId=this.storeId,r.catalogId=this.catalogId,r.langId=this.langId,r.catEntryId=e,r.quantity=t,isPositiveInteger(t)){var o=document.getElementsByName("contractSelectForm_contractId");if(null!=o&&"undefined"!=o)for(a=0;a<o.length;a++)if(o[a].checked){r.contractId=o[a].value;break}if(null!=i&&"undefined"!=i)for(a in i)r[a]=i[a];if(submitRequest()){cursor_wait();var d="ConfigureView",a=0;for(param in r)d+=(0==a++?"?":"&")+param+"="+r[param];document.location.href=getAbsoluteURL()+appendWcCommonRequestParameters(d)}}else MessageHelper.displayErrorMessage(storeNLS.QUANTITY_INPUT_ERROR)},setIsGun:function(e){this.isGun=e},changeStoreOnCart:function(e){-1!=window.location.href.indexOf("AjaxOrderItemDisplayView")&&(shoppingActionsJS.orderHasGun=!1,dojo.byId("orderHasGun")&&"true"==dojo.byId("orderHasGun").value&&(shoppingActionsJS.orderHasGun=!0));shoppingActionsJS.orderHasGun?dijit.byId("BPSStoreChangeDialogForFirearm")&&(cursor_wait(),showElementById("grayOut"),dijit.byId("BPSStoreChangeDialogForFirearm").show()):(cursor_wait(),showElementById("grayOut"),e?triggerStoreDialog(e):dojo.byId("BPSStoreLocatorHeader").click())},closeFirearmStoreChangeDialog:function(){dijit.byId("BPSStoreChangeDialogForFirearm")&&(cursor_clear(),dijit.byId("BPSStoreChangeDialogForFirearm").hide())},closeDeliveryTimeUpdateDialog:function(){dijit.byId("BPSDeliveryTimeUpdateDialog")&&(cursor_clear(),dijit.byId("BPSDeliveryTimeUpdateDialog").hide())},closeQuantityReducedDialog:function(){dijit.byId("BPSQuantityReducedDialog")&&(cursor_clear(),dijit.byId("BPSQuantityReducedDialog").hide())},firearmChangeMyStoreURL:function(){dijit.byId("BPSStoreChangeDialogForFirearm")&&(cursor_clear(),dijit.byId("BPSStoreChangeDialogForFirearm").hide(),window.location.href=getAbsoluteURL()+"en/FirearmResidencyCheckView?returnURL=AjaxOrderItemDisplayView")},getPhysicalStoresByState:function(e){var t=document.getElementById("ispState").options[document.getElementById("ispState").selectedIndex].value,i="";dojo.byId("isAmmo")&&(i=dojo.byId("isAmmo").value),"CA"==t&&"true"==i&&(dojo.byId("authPickupChkBox")&&(dojo.byId("authPickupChkBox").checked=!1),dojo.byId("authPickupSelectionid")&&(dojo.byId("authPickupSelectionid").style.display="none"),dojo.byId("authPickups")&&(dojo.byId("authPickups").style.display="none"));var r=shoppingActionsJS.allPhysicalStores[t];if(null==r){dojo.byId("arrivesIn").innerHTML="";var o=dojo.byId("shipToStoreDD");shoppingActionsJS.disableElement("shipToStoreDD"),o.style.backgroundColor="#E1E0DB",shoppingActionsJS.disableStateStoreContinueButton(),dojo.place('<option value="" selected></option>',o)}else{shoppingActionsJS.enableElement("shipToStoreDD"),(o=dojo.byId("shipToStoreDD")).style.backgroundColor="#FFF",dojo.forEach(dojo.query("option:not(:first-child)",o),function(e){dojo.destroy(e)});var d=[];for(var a in r)d.push(a);if(d.sort(),1==d.length){var n=r[d[0]].split("--"),s=n[0],l=n[1],c=(n[2],d[0].substring(3)),u=d[0].substring(0,2),m=d[0].split("-")[1].replace(/^\s+|\s+$/gm,""),I=n[3];shoppingActionsJS.enableStateStoreContinueButton(),dojo.place('<option value="'+s+'" data-delivery-time-msg="Arrives in '+I+" to "+m+","+u+'" data-store-name-id-forstore="'+l+'" data-state-code-forstore="'+u+'" selected>'+c+"</option>",o),"undefined"!=typeof BPSCheckoutHelperJS&&void 0!==BPSCheckoutHelperJS.StoreSelectionChangeHandler&&BPSCheckoutHelperJS.StoreSelectionChangeHandler(s)}else{for(var a in d){var p=r[d[a]].split("--"),_=p[0],y=p[1],h=(p[2],d[a].substring(3)),g=d[a].substring(0,2),b=d[a].split("-")[1].replace(/^\s+|\s+$/gm,""),f=p[3],v="",S="",A="";null!=e&&""!=e&&(S=(v=e.split(","))[0],A=v[1].replace(/^\s+|\s+$/gm,"")),A===_&&b.includes(S)?(shoppingActionsJS.enableStateStoreContinueButton(),dojo.place('<option value="'+_+'" data-delivery-time-msg="Arrives in '+f+" to "+b+","+g+'" data-store-name-id-forstore="'+y+'" data-state-code-forstore="'+g+'" selected >'+h+"</option>",o)):dojo.place('<option value="'+_+'" data-delivery-time-msg="Arrives in '+f+" to "+b+","+g+'" data-store-name-id-forstore="'+y+'" data-state-code-forstore="'+g+'">'+h+"</option>",o)}shoppingActionsJS.disableStateStoreContinueButton()}}},getStoresByState:function(e){var t=shoppingActionsJS.getAllPhysicalStores[e];if(null==t);else{var i=dojo.byId("select-state");dojo.forEach(dojo.query("option:not(:first-child)",i),function(e){dojo.destroy(e)});var r=[];for(var o in t)r.push(o);if(r.sort(),1==r.length){var d=t[r[0]].split("--"),a=d[0],n=d[1],s=d[2],l=r[0].substring(3);dojo.place('<option value="'+a+'" data-store-name-id="'+n+'" data-zipcode="'+s+'" data-state="'+e+'" selected>'+l+"</option>",i),this.itemRestrictionCheck()}else for(var o in r){var c=t[r[o]].split("--"),u=c[0],m=c[1],I=c[2],p=r[o].substring(3);dojo.place('<option value="'+u+'" data-store-name-id="'+m+'" data-zipcode="'+I+'"  data-state="'+e+'">'+p+"</option>",i)}}},getAllPhysicalStores:function(e,t,i){var r=this.allPhysicalStores[e];null==r?((r=new Object)[e+"-"+i]=t,this.allPhysicalStores[e]=r):this.allPhysicalStores[e][e+"-"+i]=t},disableStateStoreContinueButton:function(){null!=dojo.byId("shipToStoreContinueButton")&&"undefined"!=dojo.byId("shipToStoreContinueButton")&&(dojo.byId("shipToStoreContinueButton").setAttribute("disabled","disabled"),dojo.addClass("shipToStoreContinueButton","shipToStoreContinueButtonDisable"),dojo.removeClass("shipToStoreContinueButton","shipToStoreContinueButtonEnable"),null!=dojo.byId("arrivesIn")&&"undefined"!=dojo.byId("arrivesIn")&&(dojo.byId("arrivesIn").innerHTML="",dojo.removeClass("arrivesIn","storeSelArrivesIn"),dojo.removeClass("arrivesIn","storeSelArrivesInEmpty")),dojo.byId("generalStoreNote").style.display="none",dojo.byId("dropShipToStoreNote").style.display="none",dojo.byId("AKStoreNote").style.display="none",null!=dojo.byId("generalPickupInStoreNote")&&"undefined"!=dojo.byId("generalPickupInStoreNote")&&(dojo.byId("generalPickupInStoreNote").style.display="none"),null!=dojo.byId("authPickupSelectionid")&&"undefined"!=dojo.byId("authPickupSelectionid")&&(dojo.byId("authPickupSelectionid").style.display="none"))},enableStateStoreContinueButton:function(){null!=dojo.byId("shipToStoreContinueButton")&&"undefined"!=dojo.byId("shipToStoreContinueButton")&&(dojo.byId("shipToStoreContinueButton").removeAttribute("disabled"),dojo.removeClass("shipToStoreContinueButton","shipToStoreContinueButtonDisable"),dojo.addClass("shipToStoreContinueButton","shipToStoreContinueButtonEnable")),null!=dojo.byId("authPickupSelectionid")&&"undefined"!=dojo.byId("authPickupSelectionid")&&(dojo.byId("authPickupSelectionid").style.display="block")}},dojo.topic.subscribe("ProductInfo_Reset",shoppingActionsJS.resetProductAddedList),require(["dojo/on","dojo/has","dojo/_base/sniff","dojo/domReady!"],function(e,t){t("ie")<9&&e(document,'.compare_target > input[type="checkbox"]:click',function(e){this.blur(),this.focus()})});